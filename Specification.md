# Монстарис (ТЗ)

## 1. Общая информация

**Название игры:** Монстарис  
**Тип игры:** Файтинговая арена с перемещениями по карте и экономической системой  
**Жанр:** PvP/PvE, тактическая стратегия  
**Целевая платформа:** Web (браузеры: Google Chrome, Yandex Browser, Mozilla Firefox)

### Технологический стек

- **Frontend:** React TypeScript, PixiJS (для рендеринга)
- **Backend:** PHP (серверная логика и API)
- **База данных:** PostgreSQL
- **Сервер:** … (уточнить)

---

## 2. Цели и задачи

**Цель:** создать веб-игру с элементами мультиплеера и системы рынка, используя React TS, PHP, PixiJS, EasyStar.js.  
**Задача:** разработка игры с поддержкой мультиплеера, торгового рынка и системы прогрессии персонажей. Осуществить сдачу проекта преподавателю (Трусову А.С.).

---

## 3. Игровая карта

**Размер карты:** 80x40 клеток (прямоугольная матрица)  
**Типы клеток:**

- **Главный город:** 8х8 клеток (центр карты)
- **Chill-зоны:** размер различается, 5 зон (случайно расположены)
- **Данжи:** AхB клеток, каждая зона имеет уровень сложности
  - Чем выше уровень, тем сильнее боты и урон
    **Биомы стихий:**
- **Лес (Земля):** 25% карты
- **Водоем (Вода):** 20% карты
- **Пустыня (Огонь):** 15% карты
- **Поляна (Воздух):** 15% карты  
  **Скорость перемещения:** 1 клетка за 2 секунды  
  **Область видимости:** 5x5 клеток вокруг игрока

---

## 4. Система стихий

**Количество покемонов одной стихии:** 4  
**Количество стихий:** 4 (Огонь, Вода, Земля, Воздух)

### Влияние биомов:

- **Лес (Земля):** +10% урона для земляных покемонов, +5% защиты
- **Водоем (Вода):** +10% урона для водных покемонов, +5% скорости
- **Пустыня (Огонь):** +10% урона для огненных покемонов, +5% шанса критического удара (x1.25)
- **Поляна (Воздух):** +10% уклонения для покемонов воздуха, +5% урона для воздушных атак

---

## 5. Боевая система

**Количество покемонов в отряде:** 3 (все разные)  
**Порядок ходов:** зависит от уровня покемонов. Ходы чередуются от самого высокого уровня к низкому. Если уровни равны, первый ход распределяется случайным образом.

### Система боя:

- **Очки действия:** 1 очко за ход. Покемон может использовать скилл, защититься, атаковать или убежать.
- **Вероятность побега:** 10% шанс успешного побега за ход. В случае неудачи теряется 1 очко действия и ход переходит противнику.

### Скиллы покемонов:

**Количество скиллов:** 1 скилл у каждого покемона

#### Примеры скиллов:

- **Лес (Земля):**

  - Тектонический удар: Вызывает мощный сдвиг земли, который бьет по одной цели с силой 150% от обычной атаки. Шанс вызвать оглушение (10%) из-за потрясения земли.
  - Глыбопад: Обрушивает на врага массивные камни, нанося 120% урона. Если цель уже находится под действием отрицательного эффекта, урон увеличивается на 20%.
  - Земной импульс: Создает земной всплеск, который наносит урон всем врагам по линии. Чем больше покемонов он поражает, тем больше увеличивается его мощь (до +25% урона за каждую дополнительную цель).
  - Гравитационная волна: Изменяет локальную гравитацию, увеличивая вес врагов, что наносит им 25% от урона покемона на протяжении 5 секунд. и дополнительно увеличивает урон на 10%, если покемон противника тяжелее.

- **Водоем (Вода):**

  - Ледяной шквал: Водный покемон выпускает ледяные иглы в цель, нанося урон с шансом заморозить противника на 1 ход. Если цель заморожена, следующий удар нанесет вдвое больше урона.
  - Каскад: Мощный водяной поток обрушивается на противника. Если покемон атакует первым, урон увеличивается на 15%. Время восстановления уменьшается, если цель побеждена.
  - Волна разрушения: Сильная водная атака, которая наносит 120% урона цели и 50% от этого урона всем ближайшим противникам. Если цель была ослаблена до атаки, ближайшие враги получают полный урон.
  - Водоворот: Создает водоворот, наносящий 100% урона каждый ход в течение 3 ходов. Урон увеличивается на 10% за каждый ход, если противник не покидает зону действия.

- **Пустыня (Огонь):**

  - Испепеляющий удар: Мощная огненная атака, которая наносит 140% урона и вызывает статус "горение", наносящий урон с каждым ходом. Урон от горения увеличивается, если цель уже горит.
  - Фениксова искра: Маленький огненный шар, который при попадании взрывается и наносит 110% урона. Если цель погибает от атаки, взрыв наносит урон всем ближайшим врагам (70% от начального урона).
  - Огненная буря: Поднимает огненную бурю, наносящую 120% урона по всем врагам в зоне. С каждым ударом увеличивает шанс критического удара на 5% до конца битвы.
  - Пепельный взрыв: Атакует с мощным взрывом огня, нанося 150% урона по одной цели. Если враг был под эффектом "горения", урон увеличивается на 50%.

- **Поляна (Воздух):**
  - Удар ветра: Выпускает поток сжатого воздуха, нанося 130% урона одной цели. Если цель использовала атаку в предыдущий ход, урон увеличивается на 20%.
  - Штормовой порыв: Приземляет врага мощной воздушной атакой, нанося 110% урона, с дополнительным уроном (до +30%) за каждый успешный уклон покемона в предыдущих ходах.
  - Воздушный клинок: Выпускает острую волну воздуха, наносящую 120% урона по всем врагам в линии. Каждая пораженная цель увеличивает вероятность следующей воздушной атаки нанести критический удар.
  - Циклон разрушения: Создает мощный воздушный вихрь, нанося 150% урона цели. Если цель находится в воздухе (например, после уклона или прыжка), урон увеличивается на 50%.

### Победа в бою:

Победитель получает 30% монет, 10% покемонов (скилл понижается или теряются карты покемонов) и 20% кристаллов стихий проигравшего.

---

## 6. Экономическая система

**Основная валюта:** Монеты  
**Начальные монеты:** 500 монет

### Цена покемонов:

- Обычные: 100 монет
- Редкие: 300 монет
- Легендарные: 1000 монет
- (Возможно расписать конкретных покемонов и их цену?)
  **Рынок:**
- Комиссия за продажу: 10%
- Залог за выставление товара: 5% (возвращается при успешной продаже)
- **Обменник:** 50 кусков яйца = 1 яйцо покемона

---

## 7. Прокачка покемонов

**Кристаллы стихий:** Основной ресурс для прокачки покемонов. Они добываются в данжах или покупаются на рынке. Кристаллы различные (для каждого вида покемона).  
**Улучшение:** как в Clash Royale, требуется определённое количество карт и кристаллов. Улучшение происходит кристаллами стихии покемона.

### Стоимость улучшения:

- **1→2 уровень:** 10 кристаллов
- **2→3 уровень:** 20 кристаллов
- **3→4 уровень:** 100 кристаллов
- **4→5 уровень:** 500 кристаллов

### 1-3-5 прокачка:

- **1 уровень** - у покемона есть скилл (по умолчанию).
- **Прокачался до 2 уровня** - плюс какие-то статы.
- **Прокачался до 3 уровня** - улучшился скилл.
- **Прокачался до 4 уровня** - плюс статы.
- **Прокачался до 5 уровня** - улучшился скилл.

### Улучшение скиллов:

Улучшение скиллов происходит с повышением уровня покемона.
Описать подробнее!!!

---

## 8. Лор и тематическое оформление

**Мир:** Фэнтезийный, где каждый биом представляет определенную стихию, а главные битвы происходят за контроль над этими территориями.
**Персонажи:** Покемоны уникальны по внешнему виду и способностям, каждый обладает характерными чертами своей стихии (огонь, вода, земля, воздух).

---

## 9. Дополнительные системы и механики

**Рейтинг игроков:**

- **PvP-рейтинг:** Складывается из числа побед и поражений, уровня покемонов. Описать подробнее!!!
- **Экономический рейтинг:** Основан на количестве накопленных монет и ресурсов. Описать подробнее!!!

### Стартовый набор:

- 500 монет
- 3 покемона (огонь, вода, земля) 1 уровня

---

## 10. Описание экранов игры

# Экран регистрации/входа

- Форма регистрации / входа: поля для ввода никнейма, электронной почты и пароля.
- **Кнопки:**
  - "Регистрация" (для новых пользователей).
  - "Вход" (для существующих пользователей).
  - "Забыли пароль?" — ссылка для восстановления пароля.
- **Валидация пароля:** пароль должен содержать заглавные и строчные буквы латинского алфавита, числа и специальные символы. Подсказки о сложности пароля не отображаются.
- **Обработка ошибок:** сообщения об ошибках при неправильном вводе данных (например, "Неверный пароль").

---

# Экран меню

- **Основные кнопки:**
  - "Карта" — открывает экран с картой.
  - "Инвентарь" — открывает экран к ресурсам и покемонам игрока.
  - "Рынок" — открывает экран для торговли покемонами и ресурсами.
  - "Статистика" — показывает прогресс игрока (PvP-рейтинг, экономический рейтинг).
- **Статистика игрока:**
  - Показываются текущие ресурсы: Монеты, Кристаллы стихий (разделены по стихиям).
  - Количество покемонов в инвентаре и их уровень.

---

# Экран с игровой картой

- **Карта:** Прямоугольная сетка 80x40 клеток, занимает 80% экрана.
- **Область видимости игрока:** 5x5 клеток вокруг персонажа.
- **Аватар игрока** отображается на клетке его местоположения.
- **Кнопки передвижения:**
  - Вверх, вниз, влево, вправо — четыре стрелки для перемещения по карте. Перемещение занимает 2 секунды на одну клетку.
- **Индикатор текущей позиции** (снизу слева): отображается мини карта местоположения на карте.

---

# Экран с рынком

- **Функции торговли:**
  - Продавец: выставляет на продажу покемонов, кристаллы и другие предметы.
  - Обменник: позволяет обменивать куски яиц на яйца покемонов (50 кусков = 1 яйцо).
- **Кнопки:**
  - "Продать" — выставить покемона или ресурс на продажу.
  - "Купить" — приобретение товаров с рынка.
  - "Статистика товара" — показывает информацию о текущей продаже (цена, количество, спрос/предложение, + комиссия: 10% от суммы продажи, залог за выставление — 5%).

---

# Экран с инвентарем пользователя

- **Ресурсы:** отображаются все имеющиеся у игрока ресурсы, включая монеты, кристаллы стихий (для каждого типа стихии), яйца покемонов и другие предметы.
- **Покемоны:** список всех покемонов игрока, их уровни и доступные для улучшения кристаллы.
- **Кнопки управления:**
  - "Улучшить" — использовать ресурс (например, кристаллы для улучшения покемона). Если кристаллов хватает, кнопка “зеленая”. В противном случае серая (и при нажатии появляется текст “Не хватает ресурсов”).
  - "Просмотр покемонов" — просмотр характеристик и скиллов каждого покемона.
