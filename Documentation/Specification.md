# Монстарис (ТЗ)

## 1. Общая информация

1.1. **Название игры:** Монстарис  
1.2. **Тип игры:** Файтинговая арена с перемещениями по карте и экономической системой  
1.3. **Жанр:** PvP/PvE, тактическая стратегия  
1.4. **Целевая платформа:** Web (браузеры: Google Chrome, Yandex Browser, Mozilla Firefox)

### 1.5. Технологический стек

1.5.1. **Frontend:** React TypeScript, PixiJS (для рендеринга)  
1.5.2. **Backend:** PHP (серверная логика и API)  
1.5.3. **База данных:** PostgreSQL  
1.5.4. **Сервер:** … (уточнить)

---

## 2. Цели и задачи

2.1. **Цель:** создать веб-игру с элементами мультиплеера и системы рынка, используя React TS, PHP, PixiJS, EasyStar.js.  
2.2. **Задача:** разработка игры с поддержкой мультиплеера, торгового рынка и системы прогрессии персонажей. Осуществить сдачу проекта преподавателю (Трусову А.С.).

---

## 3. Игровая карта

3.1. **Размер карты:** 80x45 клеток (работаем с расширением 16:9)  
3.2. **Типы клеток:**

3.2.1. **Главный город:** 8х8 клеток (центр карты)  
3.2.2. **Chill-зоны:** размер различается, 5 зон (случайно расположены)  
3.2.3. **Данжи:** AхB клеток, каждая зона имеет уровень сложности. Тут присутствуют боты, которых надо убивать и получать с них ресурсы.
3.2.3.1. Чем дальше данж от **главного города**, тем сильнее в них боты (урон, защита выше).
3.2.4. **Нейтральные зоны** все остальные места карты. На них нет ботов, но если игроки там встретятся, пвп все равно начнется :)

### 3.3. Биомы стихий

3.3.1. **Лес (Земля):** 25% карты  
3.3.2. **Водоем (Вода):** 20% карты  
3.3.3. **Пустыня (Огонь):** 15% карты  
3.3.4. **Поляна (Воздух):** 15% карты  
3.3.5. **Скорость перемещения:** 1 клетка за 0.3 секунды.
3.3.6. **Область видимости:** 5x5 клеток вокруг игрока

---

## 4. Система стихий

4.1. **Количество покемонов одной стихии:** 4  
4.2. **Количество стихий:** 4 (Огонь, Вода, Земля, Воздух)
4.3. **Всего различных покемонов:** 16.

### 4.3. Влияние биомов

4.3.1. **Лес (Земля):** +10% урона для земляных покемонов.
4.3.2. **Водоем (Вода):** +10% урона для водных покемонов.  
4.3.3. **Пустыня (Огонь):** +10% урона для огненных покемонов.  
4.3.4. **Поляна (Воздух):** +10% урона для покемонов воздуха.

---

## 5. Боевая система

5.1. **Количество покемонов в отряде:** 3 (все разные)  
5.2. **Порядок ходов:** зависит от уровня покемонов. Ходы чередуются от самого высокого уровня к низкому. Если уровни равны, первый ход распределяется случайным образом.

### 5.3. Система боя

5.3.1. **Действия:** За один ход игрок может выбрать одно из трех действий: использовать скилл покемона (скилл), атаковать (атака) или убежать (побег).  
5.3.2. **Вероятность побега:** 10% шанс успешного побега за ход. В случае неудачи теряется 1 очко действия и ход переходит противнику.
5.3.3. **Время выбора действия:** У игрока есть 30 секунд, чтобы выбрать действие. В противном случае ход передается противнику.

### 5.4. Скиллы покемонов

5.4.1. **Количество скиллов:** 1 скилл у каждого покемона

### 5.5. Примеры покемонов со скиллом

5.5.1. **Лес (Земля):**

5.5.1.1. Покемон 1.1. Скилл - Тектонический удар: Вызывает мощный сдвиг земли, который бьет по одной цели с силой 150% от обычной атаки. Шанс вызвать оглушение (10%) из-за потрясения земли.
Оглушение блокирует следующий ход противника, т.е. игрок ходит дважды за раз.
Статистика (для первого уровня):
Урон: 150
Здоровье: 500
Защита: 60

5.5.1.2. Покемон 1.2. Скилл - Глыбопад: Обрушивает на врага массивные камни, нанося 120% урона 1 раз, и 10% урона 4 раза с периодичностью в 2 секунды.
Статистика (для первого уровня):
Урон: 120
Здоровье: 480
Защита: 50

5.5.1.3. Покемон 1.3. Скилл - Земной импульс: Создает земной всплеск, который наносит урон всем врагам по линии. Чем больше покемонов он поражает, тем больше увеличивается его мощь (до +25% урона за каждую дополнительную цель).
Статистика (для первого уровня):
Урон: 90
Здоровье: 550
Защита: 65

5.5.1.4. Покемон 1.4. Скилл - Гравитационная волна: Изменяет локальную гравитацию, увеличивая вес врагов, что наносит им 25% от урона покемона на протяжении 5 секунд.
Статистика (для первого уровня):
Урон: 70
Здоровье: 520
Защита: 55

5.5.2. **Водоем (Вода):**

5.5.2.1. Покемон 2.1. Скилл - Ледяной шквал: Водный покемон выпускает ледяные иглы в цель, нанося урон с шансом 50% заморозить противника на 1 ход.
Если цель заморожена, противник пропускает ход и следующий удар этим же покемонов нанесет вдвое больше урона.
Статистика (для первого уровня):
Урон: 100
Здоровье: 450
Защита: 40

5.5.2.2. Покемон 2.2. Скилл - Каскад: Мощный водяной поток обрушивается на противника. Если покемон атакует первым, урон увеличивается на 15%. Время восстановления уменьшается, если цель побеждена.
Статистика (для первого уровня):
Урон: 110
Здоровье: 460
Защита: 45

5.5.2.3. Покемон 2.3. Скилл - Волна разрушения: Сильная водная атака, которая наносит 120% урона цели и 50% от этого урона всем ближайшим противникам.
Если цель была убита, ближайшие враги получают полный урон (ибо нефиг тут).
Статистика (для первого уровня):
Урон: 120
Здоровье: 500
Защита: 55

5.5.2.4. Покемон 2.4. Скилл - Водоворот: Создает водоворот, наносящий 100% урона и блокирующий действие другого игрока на 20 секунд. Т.е. когда эффект прекратится, у противника останется 10 секунд,
чтобы выбрать атаку. Во время действия эффекта противник не может выбирать атаки. Он буквально без действий просто ждет.
Статистика (для первого уровня):
Урон: 100
Здоровье: 470
Защита: 50

5.5.3. **Пустыня (Огонь):**

5.5.3.1. Покемон 3.1. Скилл - Испепеляющий удар: Мощная огненная атака, которая наносит 140% урона и вызывает статус "горение", наносящий урон в 10% от урона каждую секунду на протяжении 5 секунд.
Статистика (для первого уровня):
Урон: 140
Здоровье: 510
Защита: 45

5.5.3.2. Покемон 3.2. Скилл - Фениксова искра: Маленький огненный шар, который при попадании взрывается и наносит 110% урона цели.
Если изначальная цель погибает от атаки, взрыв наносит еще 130% урона оставшимся врагам.
Статистика (для первого уровня):
Урон: 110
Здоровье: 480
Защита: 50

5.5.3.3. Покемон 3.3. Скилл - Огненная буря: Поднимает огненную бурю, наносящую 120% урона по всем врагам в зоне.
Статистика (для первого уровня):
Урон: 120
Здоровье: 530
Защита: 60

5.5.3.4. Покемон 3.4. Скилл - Пепельный взрыв: Атакует с мощным взрывом огня, нанося 150% урона по одной цели и заставляя покемона гореть на протяжении 1 минуты.
Если враг уже имел эффект "горения", урон составляет 200%.
Статистика (для первого уровня):
Урон: 150
Здоровье: 550
Защита: 65

5.5.4. **Поляна (Воздух):**

5.5.4.1. Покемон 4.1. Скилл - Удар ветра: Выпускает поток сжатого воздуха, нанося 130% урона одной цели. Если эта атака уже использовалась в предыдущий ход, урон увеличивается на 20%.
На третий повтор этой атаки урон уже не увеличивается и составляет 130%.
Статистика (для первого уровня):
Урон: 130
Здоровье: 470
Защита: 40

5.5.4.2. Покемон 4.2. Скилл - Штормовой порыв: Приземляет врага мощной воздушной атакой, нанося 110% урона, с дополнительным уроном (до +30%) на водяных покемонов.
Статистика (для первого уровня):
Урон: 110
Здоровье: 460
Защита: 45

5.5.4.3. Покемон 4.3. Скилл - Воздушный клинок: Выпускает острую волну воздуха, наносящую 110% урона первому покемону противника, 120% урона второму и 130% уроня третьему.
Статистика (для первого уровня):
Урон: 120
Здоровье: 490
Защита: 55

5.5.4.4. Покемон 4.4. Скилл - Циклон разрушения: Создает мощный воздушный вихрь, нанося 150% урона цели.
Статистика (для первого уровня):
Урон: 150
Здоровье: 520
Защита: 60

### 5.5.5. Победа в бою:

5.5.5.1. Победитель получает 30% монет, 10% покемонов (забираются имеющиеся яйца покемонов или понижаются их уровни) и 20% кристаллов стихий проигравшего.

---

# 6. Экономическая система

## 6.1. Валюта

6.1.1. В игре "Монстарис" основная валюта — **монеты**, которые используются для покупок на рынке и у торговца.  
6.1.2. Игрок начинает игру с 500 монет. Монеты и кристаллы стихий можно зарабатывать через победы в боях и уничтожение ботов в данжах.
Игроки могут покупать покемонов на рынке, у торговца или обменивать куски яиц на целое яйцо у обменника.

## 6.3. Рынок

6.3.1. Рынок располагается в главном городе и предоставляет игрокам возможность торговать покемонами, ресурсами и предметами. Все сделки на рынке облагаются комиссией.

6.3.2. **Комиссия за продажу**: 10% от стоимости проданного товара.  
6.3.3. **Залог за выставление товара**: 5% от установленной цены. Если товар был продан, залог возвращается продавцу. Если игрок снимает товар с продажи или товар не был продан, залог не возвращается.

6.3.4. Игроки могут выставлять на продажу различные предметы, но есть ограничения:

6.3.4.1. Игрок не может продавать покемонов, если у него в инвентаре осталось только 3 покемона. Это предотвращает ситуацию, когда игрок остается без покемонов для участия в боях.

6.3.5. На рынке контролируются цены, обеспечивая стабильные минимальные и максимальные цены на определенные категории товаров:

6.3.6. Цены на ресурсы контролируются с учетом спроса и предложения (тут нужны исчисления, но их нет пока).

## 6.4. Торговец

6.4.1. Торговец - это отдельный чувак на рынке (и отдельный экран), у которого можно купить все ресурсы, все виды покемонов в неограниченном количестве.

6.4.2. Тут отсутствует инфляция. Цены статичные.

6.4.3. Торговец является своего рода контролем инфляции. Когда цены на рынке вырастут слишком сильно, люди начнут покупать товары у торговца, а не на рынке, что запустит падение цен на рынке. И наоборот.

## 6.4.4. Цена покемонов у торговца

6.4.4.1 **Покемон 1 уровня**: 100 монет  
6.4.4.2. **Покемон 2 уровня**: 300 монет
6.4.4.3. **Покемон 3 уровня**: 500 монет
6.4.4.4. **Покемон 4 уровня**: 1000 монет  
6.4.4.5. **Покемон 5 уровня**: 2000 монет

## 6.5. Обменник

6.5.1. Обменник позволяет игрокам обменивать куски яиц на целые яйца покемонов. В обменнике установлены фиксированные условия:

6.5.1.1. Для получения одного яйца нужно обменять **50 кусков яиц**.

6.5.2. Это позволяет игрокам собирать куски яиц в различных активностях и использовать их для получения новых покемонов.

---

# 7. Прокачка покемонов

## 7.1. Основные ресурсы

7.1.1. **Кристаллы стихий:** Основной ресурс для прокачки покемонов. Они добываются в данжах или покупаются на рынке. Кристаллы различные (для каждого вида покемона).  
7.1.2. **Улучшение:** как в Clash Royale, требуется определённое количество карт и кристаллов. Улучшение происходит кристаллами стихии покемона.

## 7.2. Стоимость улучшения

7.2.1. **1→2 уровень:** 10 кристаллов  
7.2.2. **2→3 уровень:** 20 кристаллов  
7.2.3. **3→4 уровень:** 100 кристаллов  
7.2.4. **4→5 уровень:** 500 кристаллов

## 7.3. Прокачка на уровнях

7.3.1. **1 уровень** - у покемона есть скилл (по умолчанию).  
7.3.2. **2 уровень** - +40 к каждой статистике покемона.  
7.3.3. **3 уровень** - 1.25х к величине скилла покемона.  
7.3.4. **4 уровень** - +90 к каждом статистике покемона.  
7.3.5. **5 уровень** - 1.5х к величике скилла покемона.

---

# 8. Лор и тематическое оформление

## 8.1. Мир

8.1.1. Фэнтезийный, где каждый биом представляет определенную стихию, а главные битвы происходят за контроль над этими территориями.

## 8.2. Персонажи

8.2.1. Покемоны уникальны по внешнему виду и способностям, каждый обладает характерными чертами своей стихии (огонь, вода, земля, воздух).

---

# 9. Дополнительные системы и механики

## 9.1. Рейтинг игроков

9.1.1. **PvP-рейтинг:** Складывается из числа побед и поражений, уровня покемонов. Описать подробнее!!!  
9.1.2. **Экономический рейтинг:** Основан на количестве накопленных монет и ресурсов. Описать подробнее!!!

## 9.2. Стартовый набор

9.2.1. 500 монет  
9.2.2. 3 покемона (огонь, вода, земля) 1 уровня

---

# 10. Описание экранов игры

## 10.1. Экран регистрации/входа

10.1.1. Форма регистрации / входа: поля для ввода никнейма, электронной почты и пароля.

### 10.1.2. Кнопки:

10.1.2.1. "Регистрация" (для новых пользователей).  
10.1.2.2. "Вход" (для существующих пользователей).  
10.1.2.3. "Забыли пароль?" — ссылка для восстановления пароля.

### 10.1.3. Валидация пароля:

10.1.3.1. Пароль должен содержать заглавные и строчные буквы латинского алфавита, числа и специальные символы. Подсказки о сложности пароля не отображаются.

### 10.1.4. Обработка ошибок:

10.1.4.1. Сообщения об ошибках при неправильном вводе данных (например, "Неверный пароль").

---

## 10.2. Экран меню

### 10.2.1. Основные кнопки:

10.2.1.1. "Карта" — открывает экран с картой.  
10.2.1.2. "Инвентарь" — открывает экран к ресурсам и покемонам игрока.  
10.2.1.3. "Рынок" — открывает экран для торговли покемонами и ресурсами.  
10.2.1.4. "Статистика" — показывает прогресс игрока (PvP-рейтинг, экономический рейтинг).

### 10.2.2. Статистика игрока:

10.2.2.1. Показываются текущие ресурсы: Монеты, Кристаллы стихий (разделены по стихиям).  
10.2.2.2. Количество покемонов в инвентаре и их уровень.

---

## 10.3. Экран с игровой картой

### 10.3.1. Карта:

10.3.1.1. Прямоугольная сетка 80x45 клеток, занимает 80% экрана.  
10.3.1.2. Область видимости игрока: 5x5 клеток вокруг персонажа.

10.3.2. Аватар игрока отображается на клетке его местоположения.

### 10.3.3. Кнопки передвижения:

10.3.3.1. Вверх, вниз, влево, вправо — четыре стрелки для перемещения по карте. Перемещение на 1 клетку занимает 0.3 секунды.

10.3.4. Индикатор текущей позиции (снизу слева): отображается мини карта местоположения на карте.

---

# 10.4 Экран "Боевка"

## 10.4.1. Общая информация

Экран "Боевка" отображает ход сражения между покемонами игрока и его противника. Игрок управляет тремя покемонами, выбирая действия в течение каждого хода.

### 10.4.2. Элементы интерфейса

10.4.2.1. **Панель покемонов игрока**  
 В верхней части экрана отображаются три покемона игрока. Каждый из покемонов имеет следующую информацию:

- Имя
- Уровень
- Здоровье (HP)
- Доступный скилл (название)

  10.4.2.2. **Панель противника**  
   Аналогичная панель для покемонов противника, показывающая ту же информацию.

  10.4.2.3. **Поле боя**  
   В центральной части экрана находится область боя, где отображаются покемоны игрока и противника в активной фазе сражения.

### 10.4.3. Кнопки и их действия

10.4.3.1. **Кнопка "Скилл"**

- Позволяет выбрать один из доступных покемонов для использования его скилла на противника.
- При нажатии открывается меню с доступными покемонами и их скиллами, отображающими их мощность и эффект.
- После выбора скилла атака выполняется, и ход переходит к противнику.

  10.4.3.2. **Кнопка "Атака"**

- Позволяет атаковать покемонов противника, нанеся им урон (который написан в статистике покемона).
- После нажатия здоровье покемонов противника уменьшается, и ход переходит к противнику.

  10.4.3.3. **Кнопка "Побег"**

- Позволяет попытаться сбежать с поля боя. Вероятность успешного побега — 10%.
- В случае успеха игрок покидает бой, теряя 5% монет и 5% кристаллов стихий. В случае неудачи теряется одно очко действия, и ход переходит противнику.

### 10.4.4. Дополнительные элементы

10.4.4.1. **Индикатор хода**

- Отображает, чей ход текущий: игрока или противника.

---

## 10.5. Экран с рынком

### 10.5.1. Кнопки:

10.5.1.1. "Продать" — выставить покемона или ресурс на продажу.  
10.5.1.2. "Купить" — приобретение товаров с рынка.  
10.5.1.3. "Статистика товара" — показывает информацию о текущем товаре (цена, количество, спрос/предложение, + комиссия: 10% от суммы продажи, залог за выставление — 5%).

---

## 10.6. Экран с торговцем

10.6.1. Торговец: выставляет на продажу покемонов, кристаллы и другие предметы в неограниченном количество и с неизменяемыми со временем ценами.

### 10.6.2. Кнопки:

10.6.2.1. "Купить" - приобрести товар у торговца.
10.6.2.2. "Статистика товара" - показывает информацию о текущем товаре (полное наименование, цена, характеристики)

---

## 10.7. Экран с обменником

10.7.1. Обменник: позволяет обменивать куски яиц на яйца покемонов (50 кусков = 1 яйцо).

10.7.2. Добрая картинка обменника.
10.7.3. Кнопка "Обменять на яйцо".
10.7.4. Текст "У вас доступно Х кусков яиц из 50".

10.7.3.1. При присутствии необходимого количества кусков яиц происходит обмен. Игрок получает яицо покемона (из которого может выпасть случайный покемон).
10.7.3.2. При отсутствии необходимого количества кусков яиц: картинка обменника становится злой и появляется текст "Пошел отсюда, бомж. Приходи, когда соберешь необходимое количество кусков яиц!".

---

## 10.6. Экран с инвентарем пользователя

### 10.6.1. Ресурсы:

10.6.1.1. Отображаются все имеющиеся у игрока ресурсы, включая монеты, кристаллы стихий (для каждого типа стихии), яйца покемонов и другие предметы.

### 10.6.2. Покемоны:

10.6.2.1. Список всех покемонов игрока, их уровни и доступные для улучшения кристаллы.

### 10.6.3. Кнопки управления:

10.6.3.1. "Улучшить" — использовать ресурс (например, кристаллы для улучшения покемона). Если кристаллов хватает, кнопка “зеленая”. В противном случае серая (и при нажатии появляется текст “Не хватает ресурсов”).  
10.6.3.2. "Просмотр покемонов" — просмотр характеристик и скиллов каждого покемона.
