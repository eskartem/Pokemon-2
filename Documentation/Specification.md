# Монстарис (ТЗ)

## 1. Общая информация

1.1. **Название игры:** Монстарис  
1.2. **Тип игры:** Файтинговая арена с перемещениями по карте и экономической системой  
1.3. **Жанр:** PvP/PvE, тактическая стратегия  
1.4. **Целевая платформа:** Web (браузеры: Google Chrome, Yandex Browser, Mozilla Firefox)

### 1.5. Технологический стек

1.5.1. **Frontend:** React TypeScript, PixiJS  
1.5.2. **Backend:** PHP (серверная логика и API)  
1.5.3. **База данных:** MySQL  
1.5.4. **Сервер:** … (уточнить)

---

## 2. Цели и задачи

2.1. **Цель:** создать веб-игру с элементами мультиплеера и системы рынка, используя React TS, PHP, PixiJS.
2.2. **Задача:** разработка игры с поддержкой мультиплеера, торгового рынка и системы прогрессии персонажей. Осуществить сдачу проекта преподавателю (Трусову А.С.).

---

## 3. Игровая карта

3.1. **Размер карты:** 160x90 клеток (работаем с расширением 16:9)  
3.2. **Типы клеток:**

3.2.1. **Главный город:** 12х12 клеток (центр карты)  
3.2.2. **Chill-зоны:** размер различается, 5 зон всегда находятся в одних местах на карте. Площадь каждой не должна превышать 32 клеток. Их расположение на рассмотрение дизайнера.
3.2.3. **Данжи:** AхB клеток, каждая зона имеет уровень сложности. Тут присутствуют боты, которых надо убивать и получать с них ресурсы.
3.2.3.1. Чем дальше данж от **главного города**, тем сильнее в них боты (урон, защита выше).
3.2.4. **Нейтральные зоны** все остальные места карты. На них нет ботов, но если игроки там встретятся, пвп все равно начнется :)

### 3.3. Биомы стихий

3.3.1. **Лес (Земля):** 25% карты  
3.3.2. **Водоем (Вода):** 20% карты  
3.3.3. **Пустыня (Огонь):** 15% карты  
3.3.4. **Горы (Воздух):** 15% карты  
3.3.5. **Скорость перемещения:** 1 клетка за 0.3 секунды. Нельзя перемещаться по диагонали.
3.3.6. **Область видимости:** 5x5 клеток вокруг игрока

---

## 4. Система стихий

4.1. **Количество покемонов одной стихии:** 3  
4.2. **Количество стихий:** 4 (Огонь, Вода, Земля, Воздух)
4.3. **Всего различных покемонов:** 12.

### 4.3. Влияние биомов

4.3.1. **Лес (Земля):** +10% урона для земляных покемонов.
4.3.2. **Водоем (Вода):** +10% урона для водных покемонов.  
4.3.3. **Пустыня (Огонь):** +10% урона для огненных покемонов.  
4.3.4. **Горы (Воздух):** +10% урона для воздушных покемонов.

---

## 5. Боевая система

5.1. **Количество покемонов в отряде:** 3 (все разные)  
5.2. **Порядок ходов:** зависит от уровня покемонов. Ходы чередуются от самого высокого уровня к низкому. Если уровни равны, первый ход распределяется случайным образом.

### 5.3. Система боя

5.3.1. **Действия:** За один ход игрок может выбрать одно из трех действий: использовать скилл покемона (скилл), атаковать (атака) или убежать (побег).  
5.3.2. **Вероятность побега:** 10% шанс успешного побега за ход. В случае неудачи теряется 1 очко действия и ход переходит противнику.
5.3.3. **Время выбора действия:** У игрока есть 30 секунд, чтобы выбрать действие. В противном случае ход передается противнику.

### 5.4. Скиллы покемонов

5.4.1. **Количество скиллов:** 1 скилл у каждого покемона

### 5.5. Список покемонов с описанием скилла

5.5.1. **Лес (Земля):**

5.5.1.1. Bulbasaur. Скилл - Тектонический удар: Вызывает мощный сдвиг земли, который бьет по одной цели с силой 150% от урона в статистике. Шанс вызвать оглушение (10%) из-за потрясения земли.
Оглушение блокирует следующий ход противника, т.е. игрок ходит дважды за раз.
Статистика (для первого уровня):
Урон: 150
Здоровье: 500
Защита: 60

5.5.1.2. Sandshrew. Скилл - Земной импульс: Создает земной всплеск, который наносит урон всем врагам. Используется скилл на конкретного покемона, нанося ему на 125% от урона из статистики, а всем остальным наносится 100% урона из статистики.
Статистика (для первого уровня):
Урон: 90
Здоровье: 550
Защита: 65

5.5.1.3. Dugtrio. Скилл - Гравитационная волна: Изменяет локальную гравитацию, увеличивая вес врагов, что наносит им 25% от урона каждую секунду на протяжении 5 секунд.
Статистика (для первого уровня):
Урон: 70
Здоровье: 520
Защита: 55

5.5.2. **Водоем (Вода):**

5.5.2.1. Magikarp. Скилл - Ледяной шквал: Водный покемон выпускает ледяные иглы в цель, нанося 100% урон из статистики с шансом 50% заморозить противника на 1 ход.
Если цель заморожена, противник пропускает ход и следующий удар этим же покемонов нанесет 200% урона.
Статистика (для первого уровня):
Урон: 100
Здоровье: 450
Защита: 40

5.5.2.2. Omanyte. Скилл - Каскад: Мощный водяной поток обрушивается на цель. Если цель - покемон стихии воздуха или огня, наносится 150% от урона из статистики.
Статистика (для первого уровня):
Урон: 110
Здоровье: 460
Защита: 45

5.5.2.3. Poliwhirl. Скилл - Волна разрушения: Сильная водная атака, которая наносит 120% урона цели и 50% от этого урона всем ближайшим противникам.
Если цель была убита с 1 удара, ближайшие враги получают полный урон (ибо нефиг тут).
Статистика (для первого уровня):
Урон: 120
Здоровье: 500
Защита: 55

5.5.3. **Пустыня (Огонь):**

5.5.3.1. Flareon. Скилл - Испепеляющий удар: Мощная огненная атака, которая наносит 140% урона и вызывает статус "горение", наносящий урон в 10% от урона каждую секунду на протяжении 5 секунд.
Статистика (для первого уровня):
Урон: 140
Здоровье: 510
Защита: 45

5.5.3.2. Ponyta. Скилл - Огненная буря: Поднимает огненную бурю, наносящую 120% урона по всем врагам в зоне.
Статистика (для первого уровня):
Урон: 120
Здоровье: 530
Защита: 60

5.5.3.3. Growlithe. Скилл - Пепельный взрыв: Атакует с мощным взрывом огня, нанося 150% урона по одной цели и заставляя покемона гореть на протяжении 1 минуты.
Если враг уже имеет эффект "горения", урон составляет 200%.
Статистика (для первого уровня):
Урон: 150
Здоровье: 550
Защита: 65

5.5.4. **Горы (Воздух):**

5.5.4.1. Butterfree. Скилл - Штормовой порыв: Атакует врага мощной воздушной атакой, нанося 110% урона, с дополнительным уроном (до +30%) на водяных покемонов.
Статистика (для первого уровня):
Урон: 110
Здоровье: 460
Защита: 45

5.5.4.2. Zubat. Скилл - Воздушный клинок: Выпускает острую волну воздуха, наносящую 110% урона первому покемону противника, 120% урона второму и 130% уроня третьему.
Статистика (для первого уровня):
Урон: 120
Здоровье: 490
Защита: 55

5.5.4.3. Farfetch'd. Скилл - Циклон разрушения: Создает мощный воздушный вихрь, нанося 150% урона цели.
Статистика (для первого уровня):
Урон: 150
Здоровье: 520
Защита: 60

### 5.5.5. Победа в бою:

5.5.5.1. Победитель получает 30% монет, 10% покемонов (забираются имеющиеся куски яиц покемонов или понижаются уровни самих покемонов) и 20% кристаллов стихий проигравшего.

---

# 6. Экономическая система

## 6.1. Валюта

6.1.1. В игре "Монстарис" основная валюта — **монеты**, которые используются для покупок на рынке и у торговца.  
6.1.2. Игрок начинает игру с 500 монет. Монеты и кристаллы стихий можно зарабатывать через победы в боях и уничтожение ботов в данжах.
Игроки могут покупать покемонов на рынке, у торговца или обменивать куски яиц на целое яйцо у обменника.

## 6.2. Рынок

6.2.1. Рынок находится в главном городе и предоставляет игрокам возможность торговать покемонами, ресурсами и предметами. Все сделки на рынке облагаются комиссией.

6.2.2. Комиссия за продажу: 10% от стоимости проданного товара.

6.2.3. Залог за выставление товара: 5% от установленной цены. Если товар был продан, залог возвращается продавцу. Если товар снят с продажи или не был продан, залог не возвращается.

6.2.4. Игроки могут выставлять на продажу различные предметы, но есть ограничения:

6.2.4.1. Игрок не может продавать покемонов, если у него в инвентаре осталось только 3 покемона. Это предотвращает ситуацию, когда игрок остается без покемонов для участия в боях.

6.2.5. Механика лотов и ставок: Каждый лот на рынке имеет фиксированное время, равное 5 минутам, и игроки могут делать ставки на товары. Лоты работают по принципу аукциона, как на eBay: игроки могут повышать ставки, и товар будет продан тому, кто предложит наибольшую цену в конце времени лота.

6.2.6. Ограничения на количество лотов: Чтобы предотвратить злоупотребления, игроки обязаны оставлять залог для выставления лота. Это ограничивает возможность бесконечно создавать новые лоты и ставить ставки на них.

6.2.7. На рынке контролируются цены, обеспечивая стабильные минимальные и максимальные цены на определенные категории товаров.

6.2.8. Цены на ресурсы контролируются с учетом спроса и предложения, что требует расчетов, которые будут реализованы позже.

## 6.3. Торговец

6.3.1. **Торговец** - это отдельный персонаж на рынке (и отдельный экран), к которому игрок может обратиться для продажи определенных ресурсов. Игроки могут продавать Торговцу только куски яиц и кристаллы стихий, но не самих покемонов.

6.3.2. **Статичные цены**. Цены на все ресурсы, которые Торговец принимает, фиксированы и не подвержены инфляции. Это позволяет игрокам продавать ресурсы по стабильным ценам независимо от их рыночной стоимости.

## 6.4. Обменник

6.4.1. Обменник позволяет игрокам обменивать куски яиц на целые яйца покемонов. В обменнике установлены фиксированные условия:

6.4.1.1. Для получения одного яйца нужно обменять **50 кусков яиц**.

6.4.2. Это позволяет игрокам собирать куски яиц в различных активностях и использовать их для получения новых покемонов.

## 6.5. Инвентарь

6.5.1. Экран "Инвентарь" предоставляет игроку доступ ко всем имеющимся покемонам, позволяет улучшать их, просматривать статистику и выбирать трех покемонов, которые будут участвовать в сражениях.

6.5.2. Все покемоны, находящиеся во владении игрока, отображаются в инвентаре.

6.5.3. 3 покемона, которые участвуют в сражениях, находятся сверху. Все остальные покемоны снизу. Между ними можно сделать отделяющую черту.

- **Просмотр покемонов**: Игрок может видеть всех имеющихся покемонов.
- **Выбор покемонов для боя**: Игрок может выбрать трех покемонов, которые будут участвовать в сражениях.
- **Улучшение покемонов**: Игрок может повысить уровень или улучшить способности покемонов с помощью полученных ресурсов.
- **Просмотр статистики**: Игрок может изучить полные статистические данные каждого покемона, чтобы лучше понять его сильные и слабые стороны.

---

# 7. Прокачка покемонов

## 7.1. Основные ресурсы

7.1.1. **Кристаллы стихий:** Основной ресурс для прокачки покемонов. Они добываются в данжах или покупаются на рынке. Кристаллы различные (для каждого вида покемона).  
7.1.2. **Улучшение:** как в Clash Royale, требуется определённое количество карт и кристаллов. Улучшение происходит кристаллами стихии покемона.

## 7.2. Стоимость улучшения

7.2.1. **1→2 уровень:** 10 кристаллов  
7.2.2. **2→3 уровень:** 20 кристаллов  
7.2.3. **3→4 уровень:** 100 кристаллов  
7.2.4. **4→5 уровень:** 500 кристаллов

## 7.3. Прокачка на уровнях

7.3.1. **1 уровень** - у покемона есть урон, здоровье и защита (по умолчанию).  
7.3.2. **2 уровень** - +30% к урону, здоровью и +20% к защите покемона (относительно 1 уровня)
7.3.2. **3 уровень** - +30% к урону, здоровью и +20% к защите покемона (относительно 2 уровня)
7.3.2. **4 уровень** - +30% к урону, здоровью и +20% к защите покемона (относительно 3 уровня)
7.3.2. **5 уровень** - +30% к урону, здоровью и +20% к защите покемона (относительно 4 уровня)

---

# 8. Лор и тематическое оформление

## 8.1. Мир

8.1.1. Фэнтезийный, где каждый биом представляет определенную стихию, а главные битвы происходят за контроль над этими территориями.

## 8.2. Персонажи

8.2.1. Покемоны уникальны по внешнему виду и способностям, каждый обладает характерными чертами своей стихии (огонь, вода, земля, воздух).

---

# 9. Дополнительные системы и механики

## 9.1. Рейтинг игроков

9.1.1. **PvP-рейтинг:** Складывается из числа побед и поражений, уровня покемонов. Описать подробнее!!!  
9.1.2. **Экономический рейтинг:** Основан на количестве накопленных монет и ресурсов. Описать подробнее!!!

## 9.2. Стартовый набор

9.2.1. 500 монет  
9.2.2. 3 покемона (огонь, вода, земля) 1 уровня

## 9.3. Внутриигровой чат

9.3.1. **Общий функционал чата**  
9.3.1.1. Внутриигровой чат находится на главной странице и доступен всем игрокам.  
9.3.1.2. Игроки могут отправлять сообщения, которые будут видны всем в реальном времени.  
9.3.1.3. Каждое сообщение содержит:

**_Никнейм отправителя._**
**_Время отправления (в формате Ч:M)._**
**_Текст сообщения._**

9.3.2. **Ограничения на сообщения**  
9.3.2.1. Минимальная длина сообщения: **1 символ**.  
9.3.2.2. Максимальная длина сообщения: **256 символов**. 9.3.2.3. Сообщения, превышающие ограничение по длине, не отправляются, а игроку показывается сообщение об ошибке ("Лимит символов в сообщении: 256").

9.3.3. **Управление и действия**  
9.3.3.1. Ввод текста осуществляется через текстовое поле в чате.  
9.3.3.2. Кнопка "Отправить" отправляет введенное сообщение. Если текстовое поле пустое, кнопка заблокирована.  
9.3.3.3. Игрок может использовать кнопку "Очистить", чтобы удалить введенный текст до отправки.
9.3.3.4. Сообщение также отправляется при нажатии "Enter".
9.3.3.5. Если перед нажатием "Enter" зажать "Shift", произойдет снос строки в поле с сообщением.

---

# 10. Описание экранов игры

## 10.1. Экран регистрации/входа

10.1.1. Форма регистрации / входа: поля для ввода никнейма, электронной почты и пароля.

### 10.1.2. Кнопки:

10.1.2.1. "Регистрация" (для новых пользователей).  
10.1.2.2. "Вход" (для существующих пользователей).  
10.1.2.3. "Забыли пароль?" — ссылка для восстановления пароля.

### 10.1.3. Валидация пароля:

10.1.3.1. Пароль должен содержать заглавные и строчные буквы латинского алфавита, числа и специальные символы. Подсказки о сложности пароля не отображаются. Минимальная длина - 8 символов. Максимальная - до 15 символов.

### 10.1.4. Обработка ошибок:

10.1.4.1. Сообщения об ошибках при неправильном вводе данных (например, "Неверный пароль").

---

## 10.2. Экран меню

### 10.2.1. Основные кнопки:

10.2.1.1. "Карта" — открывает экран с картой.  
10.2.1.2. "Инвентарь" — открывает экран к ресурсам и покемонам игрока.  
10.2.1.3. "Рынок" — открывает экран для торговли покемонами и ресурсами.  
10.2.1.4. "Статистика" — показывает прогресс игрока (PvP-рейтинг, экономический рейтинг).

Кнопки сверху
10.2.1.5. "Логаут" - при нажатии пользователь выходит из своего аккаунта.
10.2.1.6. "Mute" - при нажатии отключает/включает все звуки в игре.

### 10.2.2. Статистика игрока:

10.2.2.1. Показываются текущие ресурсы: Монеты, Кристаллы стихий (разделены по стихиям).  
10.2.2.2. Количество покемонов в инвентаре и их уровень.

### 10.2.3. Внутриигровой чат

10.2.3.1. Чат отображается в правой части экрана.
10.2.3.2. Отображает список последних сообщений от игроков с их никнеймами, временем отправления и текстом сообщения.
10.2.3.3. Под списком сообщений находится текстовое поле для ввода сообщений и кнопки "Отправить" и "Очистить".

---

## 10.3. Экран с игровой картой

### 10.3.1. Карта:

10.3.1.1. Прямоугольная сетка 80x45 клеток, занимает 80% экрана.  
10.3.1.2. Область видимости игрока: 5x5 клеток вокруг персонажа.

10.3.2. Аватар игрока отображается на клетке его местоположения.

### 10.3.3. Кнопки передвижения:

10.3.3.1. Вверх, вниз, влево, вправо — четыре стрелки для перемещения по карте. Перемещение на 1 клетку занимает 0.3 секунды.

10.3.4. Индикатор текущей позиции (снизу слева): отображается мини карта местоположения на карте.

---

# 10.4 Экран "Боевка"

## 10.4.1. Общая информация

Экран "Боевка" отображает ход сражения между покемонами игрока и его противника. Игрок управляет тремя покемонами, выбирая действия в течение каждого хода.

### 10.4.2. Элементы интерфейса

10.4.2.1. **Панель покемонов игрока**  
 В верхней части экрана отображаются три покемона игрока. Каждый из покемонов имеет следующую информацию:

- Имя
- Уровень
- Здоровье (HP)
- Доступный скилл (название)

  10.4.2.2. **Панель противника**  
   Аналогичная панель для покемонов противника, показывающая ту же информацию.

  10.4.2.3. **Поле боя**  
   В центральной части экрана находится область боя, где отображаются покемоны игрока и противника в активной фазе сражения.

### 10.4.3. Кнопки и их действия

Пользователь может мышкой выбрать одного из своих покемонов во время боя. При нажатии на конкретного покемона он подсвечивается (это показывает выбранного на данный момент покемона).
На этого выбранного покемона и будут действовать функционал кнопок, описанных ниже.

10.4.3.1. **Кнопка "Скилл"**

- Позволяет выбрать один из доступных покемонов для использования его скилла на противника.
- При нажатии открывается меню с доступными покемонами и их скиллами, отображающими их мощность и эффект.
- После выбора скилла атака выполняется, и ход переходит к противнику.

  10.4.3.2. **Кнопка "Атака"**

- Позволяет атаковать покемонов противника, нанеся им урон (который написан в статистике покемона).
- После нажатия здоровье покемонов противника уменьшается, и ход переходит к противнику.

  10.4.3.3. **Кнопка "Побег"**

- Позволяет попытаться сбежать с поля боя. Вероятность успешного побега — 10%.
- В случае успеха игрок покидает бой, теряя 5% монет и 5% кристаллов стихий. В случае неудачи теряется одно очко действия, и ход переходит противнику.

### 10.4.4. Дополнительные элементы

10.4.4.1. **Индикатор хода**

- Отображает, чей ход текущий: игрока или противника.

---

## 10.5. Экран с рынком

### 10.5.1. Кнопки:

10.5.1.1. "Продать" — выставить покемона или ресурс на продажу.  
10.5.1.2. "Купить" — приобретение товаров с рынка.  
10.5.1.3. "Статистика товара" — показывает информацию о текущем товаре (цена, количество, спрос/предложение, + комиссия: 10% от суммы продажи, залог за выставление — 5%).

---

## 10.6. Экран с торговцем

10.6.1. Торговец: вы можете продать ему куски яиц и кристаллы стихий.

### 10.6.2. Кнопки:

10.6.2.1. "Купить" - приобрести товар у торговца.
10.6.2.2. "Статистика товара" - показывает информацию о текущем товаре (полное наименование, цена, характеристики)

---

## 10.7. Экран с обменником

10.7.1. Обменник: позволяет обменивать куски яиц на яйца покемонов (50 кусков = 1 яйцо).

10.7.2. Добрая картинка обменника.
10.7.3. Кнопка "Обменять на яйцо".
10.7.4. Текст "У вас доступно Х кусков яиц из 50".

10.7.3.1. При присутствии необходимого количества кусков яиц происходит обмен. Игрок получает яицо покемона (из которого может выпасть случайный покемон).
10.7.3.2. При отсутствии необходимого количества кусков яиц: картинка обменника становится злой и появляется текст "Пошел отсюда, бомж. Приходи, когда соберешь необходимое количество кусков яиц!".

---

## 10.8. Экран "Инвентарь"

### 10.8.1. Список покемонов

- Экран разделен на 2 части: верхняя и нижняя.
- В нижней части инвентаря отображается список всех покемонов, принадлежащих игроку.
- Каждый покемон отображается с основными характеристиками: имя, уровень, элемент и текущие показатели здоровья (HP).
- В верхней части находятся 3 покемоны, уже выбранные для боя.

### 10.8.2. Кнопки и их действия

10.8.2.1. **"Улучшить"**

- Доступна при выборе покемона в списке.
- Открывает меню улучшений, где игрок может использовать доступные ресурсы для повышения уровня покемона.
- **Результат**: После подтверждения улучшений статистика покемона обновляется, и ресурсы игрока расходуются. Если ресурсов недостаточно, выводится сообщение "Недостаточно ресурсов, бомж!".

  10.8.2.2. **"Статистика"**

- Отображает полные данные по выбранному покемону: здоровье (HP), защита, урон, скорость, а также уникальные навыки.
- **Результат**: Открывается дополнительное окно с подробной статистикой, позволяющее игроку глубже понять сильные и слабые стороны покемона.

  10.8.2.3. **"Заменить"**

- Доступна на иконках покемонов, уже выбранных для боя.
- **При нажатии** переносит пользователя на всех остальных покемонов.
- При выборе любого их них, старый покемон заменяется.

### 10.8.3. Дополнительные элементы

10.8.3.1. **Индикатор ресурсов**

- Отображает текущее количество ресурсов игрока, доступных для улучшений (монеты, кристаллы стихий, куски яиц покемонов).
- **Результат**: Обновляется при использовании ресурсов на улучшения.
